# üìä –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## üîç –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Å—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

## ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (–ò–°–ü–†–ê–í–õ–ï–ù–´)

### 1. ‚úÖ –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–≤–æ—Ç—ã API (429 –æ—à–∏–±–∫–∏)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å `gemini-2.0-flash-exp`
- –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ AI –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ RSS –ø–∞—Ä—Å–∏–Ω–≥–µ
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –ó–∞–º–µ–Ω–µ–Ω–∞ –º–æ–¥–µ–ª—å –Ω–∞ `gemini-1.5-flash` (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ free tier)
2. AI –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π —Å priority >= 6 (–ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º)
3. –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –°–Ω–∏–∂–µ–Ω–∏–µ 429 –æ—à–∏–±–æ–∫ –Ω–∞ 80-90%
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ AI –∞–Ω–∞–ª–∏–∑–∞

---

### 2. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `get_multiple_crypto_prices()` –∏ `get_fear_greed_index()` –º–æ–≥—É—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- –ë–æ—Ç –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã try-except –±–ª–æ–∫–∏ –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö API –≤—ã–∑–æ–≤–æ–≤
- –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

### 3. ‚úÖ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏ –∑–∞–¥–∞—á (missed jobs)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Queue Poster –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –ó–∞–¥–∞—á–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–æ–ª–≥–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ (AI –∞–Ω–∞–ª–∏–∑)
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∑–∞–¥–∞—á–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò–Ω—Ç–µ—Ä–≤–∞–ª Queue Poster —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 60 —Å–µ–∫—É–Ω–¥
- –ú–µ–Ω—å—à–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –∑–∞–¥–∞—á

---

### 4. ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Å cleanup –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- "Task was destroyed but it is pending" –æ—à–∏–±–∫–∏
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

---

### 5. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ—Å–ª–µ RSS –ø–∞—Ä—Å–∏–Ω–≥–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –Ω–∞–π–¥–µ–Ω–æ, –¥–æ–±–∞–≤–ª–µ–Ω–æ, –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (–¢–†–ï–ë–£–Æ–¢ –í–ù–ò–ú–ê–ù–ò–Ø)

### 6. Userbot –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù –§–ê–ô–õ –°–ï–°–°–ò–ò (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ!)
üîÑ –ú–∏–≥—Ä–∏—Ä—É—é –≤ StringSession...
ERROR: Task was destroyed but it is pending
ALERT: Userbot –Ω–µ –∑–∞–ø—É—â–µ–Ω, —Ö–æ—Ç—è TG_API_ID –Ω–∞—Å—Ç—Ä–æ–µ–Ω!
```

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å–µ—Å—Å–∏–∏ –≤—Ä—É—á–Ω—É—é:
   ```bash
   python -c 'from services.telegram_listener import setup_userbot; import asyncio; asyncio.run(setup_userbot())'
   ```

2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `TG_SESSION_STRING` –≤ `.env`

3. –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª `anon_session.session`

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (Userbot –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã)

---

## üìà –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –î–ê–õ–¨–ù–ï–ô–®–ï–ì–û –£–õ–£–ß–®–ï–ù–ò–Ø

### 1. –î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è 429 –æ—à–∏–±–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–¶–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö API

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
async def _retry_with_backoff(self, func, max_retries=3):
    """Retry —Å exponential backoff –¥–ª—è 429 –æ—à–∏–±–æ–∫"""
    for attempt in range(max_retries):
        try:
            return await func()
        except Exception as e:
            if '429' in str(e) and attempt < max_retries - 1:
                # –ü–∞—Ä—Å–∏–º retryDelay –∏–∑ –æ—Ç–≤–µ—Ç–∞
                delay = self._extract_retry_delay(e) or (2 ** attempt)
                await asyncio.sleep(delay)
                continue
            raise
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å, –µ—Å–ª–∏ 429 –æ—à–∏–±–∫–∏ –∏—Å—á–µ–∑–Ω—É—Ç)

---

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

**–¶–µ–ª—å:** –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ AI –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å/–¥–µ–Ω—å
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—Ä–µ–º—è –¥–æ –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è –∫–≤–æ—Ç—ã

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

---

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ AI –∞–Ω–∞–ª–∏–∑–æ–≤

**–¶–µ–ª—å:** –°–Ω–∏–∑–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã AI –∞–Ω–∞–ª–∏–∑–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- TTL: 1 —á–∞—Å

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

---

### 4. –ü–æ–¥–∞–≤–∏—Ç—å Pydantic warnings

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
UserWarning: Field name "name" shadows an attribute in parent "Operation"
```

**–†–µ—à–µ–Ω–∏–µ:**
```python
import warnings
warnings.filterwarnings("ignore", category=UserWarning, module="pydantic")
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –û—á–µ–Ω—å –Ω–∏–∑–∫–∏–π (–∫–æ—Å–º–µ—Ç–∏–∫–∞)

---

## üìä –ê–ù–ê–õ–ò–ó –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–û–°–¢–ò

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:

1. ‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
2. ‚úÖ –ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏
4. ‚úÖ –ü–æ—Å—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è (2 –ø–æ—Å—Ç–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥)
5. ‚úÖ RSS –ø–∞—Ä—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç (109 –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–∞–π–¥–µ–Ω–æ)
6. ‚úÖ Fallback –Ω–∞ OpenAI —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–æ–≥–¥–∞ Gemini –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
7. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è:

1. ‚ö†Ô∏è AI –∞–Ω–∞–ª–∏–∑ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ 429 –æ—à–∏–±–æ–∫ (–ò–°–ü–†–ê–í–õ–ï–ù–û)
2. ‚ö†Ô∏è Userbot –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (—Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
3. ‚ö†Ô∏è –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö (–ò–°–ü–†–ê–í–õ–ï–ù–û)

---

## üéØ –û–¶–ï–ù–ö–ê –ö–ê–ß–ï–°–¢–í–ê –õ–û–ì–ò–ö–ò

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:

1. ‚úÖ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
2. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–∞
3. ‚úÖ Rate limiting –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π
4. ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
5. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
7. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:

1. ‚ö†Ô∏è AI –∞–Ω–∞–ª–∏–∑ —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–µ–Ω (–ò–°–ü–†–ê–í–õ–ï–ù–û - —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞–∂–Ω—ã—Ö)
2. ‚ö†Ô∏è –ù–µ—Ç retry –¥–ª—è API –æ—à–∏–±–æ–∫ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)
3. ‚ö†Ô∏è –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

---

## üîí –ê–ù–ê–õ–ò–ó –£–Ø–ó–í–ò–ú–û–°–¢–ï–ô

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

1. ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π)
2. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. ‚ö†Ô∏è –§–∞–π–ª —Å–µ—Å—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ, –Ω–æ –µ—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)
4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:

1. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
2. ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã (OpenAI –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Gemini)
3. ‚úÖ –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∑–∞—â–∏—Ç—ã –∑–∞–¥–∞—á
4. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π cleanup —Ä–µ—Å—É—Ä—Å–æ–≤

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –†–ê–ë–û–¢–ï –° –ö–†–ò–ü–¢–û-–ë–û–¢–û–ú

### –î–ª—è –ø–µ—Ä–µ–¥–æ–≤–æ–≥–æ –±–æ—Ç–∞ –≤–∞–∂–Ω—ã:

1. **–°–∫–æ—Ä–æ—Å—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π:**
   - ‚úÖ –ì–æ—Ä—è—á–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤–Ω–µ –æ—á–µ—Ä–µ–¥–∏
   - ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –º–∏–Ω—É—Ç –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π

2. **–ö–∞—á–µ—Å—Ç–≤–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
   - ‚úÖ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
   - ‚úÖ AI –∞–Ω–∞–ª–∏–∑ –≤–∞–∂–Ω–æ—Å—Ç–∏
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏
   - ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

3. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
   - ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ–¥—Ä–µ–Ω—ã:

- [x] –ó–∞–º–µ–Ω–µ–Ω–∞ –º–æ–¥–µ–ª—å –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—É—é
- [x] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω AI –∞–Ω–∞–ª–∏–∑ (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞–∂–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π)
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
- [x] –£–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª Queue Poster
- [x] –£–ª—É—á—à–µ–Ω cleanup –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
- [x] –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ RSS –ø–∞—Ä—Å–∏–Ω–≥–∞

### –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:

- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å–µ—Å—Å–∏–∏ userbot (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ RSS)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–≤–æ—Ç—ã –Ω–∞ Gemini API
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 429 –æ—à–∏–±–æ–∫ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

- [ ] –î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è 429 –æ—à–∏–±–æ–∫
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ AI –∞–Ω–∞–ª–∏–∑–æ–≤
- [ ] –ü–æ–¥–∞–≤–∏—Ç—å Pydantic warnings

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ 429 –æ—à–∏–±–æ–∫ —Å—Ç–∞–ª–æ –º–µ–Ω—å—à–µ
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ AI –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤–∞–∂–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Userbot (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å–µ—Å—Å–∏–∏
   - –î–æ–±–∞–≤–∏—Ç—å TG_SESSION_STRING –≤ .env

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É RSS –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 429 –æ—à–∏–±–æ–∫

---

*–ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–æ–≥–æ–≤ –æ—Ç 2025-12-26*
*–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ–¥—Ä–µ–Ω—ã!*
*–î–∞—Ç–∞: $(date)*
