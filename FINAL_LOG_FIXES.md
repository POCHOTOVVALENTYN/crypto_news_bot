# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–Ω–µ–¥—Ä–µ–Ω–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## üìä –ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤

---

## ‚úÖ –í–ù–ï–î–†–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—É—é

**–§–∞–π–ª:** `services/ai_summary.py`
- **–ë—ã–ª–æ:** `gemini-2.0-flash-exp` (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è, –Ω–µ—Ç –∫–≤–æ—Ç—ã –Ω–∞ free tier)
- **–°—Ç–∞–ª–æ:** `gemini-1.5-flash` (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ free tier)

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ 429 –æ—à–∏–±–æ–∫
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ AI –∞–Ω–∞–ª–∏–∑–∞

---

### 2. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω AI –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏ RSS –ø–∞—Ä—Å–∏–Ω–≥–µ

**–§–∞–π–ª:** `main.py`, —Ñ—É–Ω–∫—Ü–∏—è `scheduled_parsing()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- AI –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π —Å priority >= 6 (–ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º)
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ AI –∑–∞–ø—Ä–æ—Å–æ–≤
- –ë—ã—Å—Ç—Ä–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ RSS —Ñ–∏–¥–æ–≤
- ‚úÖ –ú–µ–Ω—å—à–µ 429 –æ—à–∏–±–æ–∫

---

### 3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è —Ü–µ–Ω –∏ –∏–Ω–¥–µ–∫—Å–∞ —Å—Ç—Ä–∞—Ö–∞

**–§–∞–π–ª:** `main.py`, —Ñ—É–Ω–∫—Ü–∏—è `check_queue_and_post()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã try-except –±–ª–æ–∫–∏ –¥–ª—è `get_multiple_crypto_prices()`
- –î–æ–±–∞–≤–ª–µ–Ω—ã try-except –±–ª–æ–∫–∏ –¥–ª—è `get_fear_greed_index()`

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ë–æ—Ç –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω
- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ —Ü–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

---

### 4. ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª Queue Poster

**–§–∞–π–ª:** `main.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –∏–∑–º–µ–Ω–µ–Ω —Å 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ 60 —Å–µ–∫—É–Ω–¥

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ú–µ–Ω—å—à–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –∑–∞–¥–∞—á (missed jobs)
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

---

### 5. ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏ Userbot

**–§–∞–π–ª:** `services/telegram_listener.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–±—Ä–∞–Ω–∞ –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ä—É—á–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ë–æ—Ç –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "Task was destroyed"

---

### 6. ‚úÖ –£–ª—É—á—à–µ–Ω cleanup –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

**–§–∞–π–ª:** `main.py`, —Ñ—É–Ω–∫—Ü–∏—è `main()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ù–µ—Ç warnings "Task was destroyed"
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

---

### 7. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ RSS –ø–∞—Ä—Å–∏–Ω–≥–∞

**–§–∞–π–ª:** `main.py`, —Ñ—É–Ω–∫—Ü–∏—è `scheduled_parsing()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –Ω–∞–π–¥–µ–Ω–æ, –¥–æ–±–∞–≤–ª–µ–Ω–æ, –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –õ—É—á—à–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞
- ‚úÖ –õ–µ–≥—á–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

---

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. ‚úÖ **–ú–µ–Ω—å—à–µ 429 –æ—à–∏–±–æ–∫:**
   - –°—Ç–∞–±–∏–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ free tier
   - –ú–µ–Ω—å—à–µ AI –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞–∂–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π)

2. ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–µ–µ —Ä–∞–±–æ—Ç–∞:**
   - –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
   - –ù–µ—Ç –ø—Ä–æ–ø—É—Å–∫–æ–≤ –∑–∞–¥–∞—á
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π cleanup

3. ‚úÖ **–õ—É—á—à–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö API
   - –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏ —Å–±–æ—è—Ö

---

## ‚ö†Ô∏è –û–°–¢–ê–í–®–ò–ï–°–Ø –ü–†–û–ë–õ–ï–ú–´ (—Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è)

### 1. –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–≤–æ—Ç—ã API (–µ—Å–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–≤–æ—Ç—ã –Ω–∞ Gemini API (free tier –ª–∏–º–∏—Ç—ã)
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—É–ø–∫—É –ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π

### 2. Userbot –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å–µ—Å—Å–∏–∏ –≤—Ä—É—á–Ω—É—é
- –î–æ–±–∞–≤–∏—Ç—å TG_SESSION_STRING –≤ .env
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### 3. –î–æ–±–∞–≤–∏—Ç—å retry –¥–ª—è 429 –æ—à–∏–±–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–†–µ—à–µ–Ω–∏–µ:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º —Å exponential backoff
- –ü–∞—Ä—Å–∏—Ç—å retryDelay –∏–∑ –æ—Ç–≤–µ—Ç–∞ API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] –ú–µ–Ω—å—à–µ 429 –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- [ ] AI –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤–∞–∂–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
- [ ] –ù–µ—Ç –ø—Ä–æ–ø—É—Å–∫–æ–≤ –∑–∞–¥–∞—á (missed jobs)
- [ ] –ù–µ—Ç "Task was destroyed" –æ—à–∏–±–æ–∫
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ RSS –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

---

*–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ–¥—Ä–µ–Ω—ã!*
*–î–∞—Ç–∞: $(date)*
